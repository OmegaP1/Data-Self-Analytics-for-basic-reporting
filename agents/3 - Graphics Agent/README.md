# Data Self Analytics Agent v3 - Visualization Edition

This is the most advanced version of the analytics agent. It can answer data questions by querying the SQLite database AND generate visualizations like bar charts and plots to display the data directly in the chat.

## Core Features

-   **Data Visualization:** Can generate charts (e.g., bar charts) based on natural language requests.
-   **High Performance:** Queries the optimized SQLite database for all data operations.
-   **Dual Capability:** Can handle both standard data queries (like V2) and visualization requests.
-   **Supervisor Architecture:** Uses an intelligent supervisor to route tasks to the correct specialist worker (Query Worker or Visualization Worker).

## Prerequisites

-   The `analytics.db` file must be generated by the preprocessing pipeline.
-   New Python libraries must be installed: `pip install matplotlib seaborn`

## Project Structure

your-project-root/
├── agents/
│   └── data_self_analytics__visualization_v3/  <-- The ADK App folder for v3
│       ├── agent.py
│       └── .env
└── data/
└── processed/
└── analytics.db

## Setup & Running

1.  **Generate Database & Install Dependencies:** Ensure `analytics.db` exists and `matplotlib` and `seaborn` are installed.
2.  **Environment File:** Create a `.env` file inside the V3 agent folder with your GCP credentials.
3.  **Run the Agent:** From the `.../agents/` directory, run the ADK web server.

    ```bash
    adk web
    ```
    Select the `data_self_analytics__visualization_v3` agent from the web UI.

## Example Questions

### Visualization Questions

1.  Show me a bar chart of the number of employees per Country.
2.  Create a plot showing the top 10 job profiles by employee count.
3.  Generate a graph of FTE distribution by Division.
4.  Can you visualize the count of employees in each Worker Category?
5.  Plot the number of employees for each Band.
6. Generate a bar chart showing the employee count for the top 7 countries, and segment the bars by Worker Category.
7. Create a violin plot to compare the FTE distribution across each employee Band.
8. Generate a line chart showing the trend of total employee count over each Snapshot Month, with separate colored lines for the top 4 Divisions.
9. I need to see the workforce composition. Create a donut chart showing the percentage of employees in each Worker Category.
10. Generate a heatmap to visualize the concentration of total FTE across the top 5 Countries and top 5 Divisions